{% extends "knowledgebase/base.html" %}
{% load static %}

{% block title %}–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç - –°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏{% endblock %}

{% block content %}
<div class="container" style="max-width: 1200px; margin: 40px auto; padding: 20px;">
    <h2>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç —Å–ª—É–∂–±—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏</h2>
    <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ user.username }}!</p>

    <div class="dashboard-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 20px; margin-top: 30px;">
        <div class="card" style="background: white; padding: 20px; border-radius: 8px; border: 1px solid #ddd;">
            <h3>üÜï –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞—è–≤–∫–∏</h3>
            {% if active_requests %}
                <ul style="list-style: none; padding: 0;">
                    {% for req in active_requests %}
                    <li style="padding: 10px; border-bottom: 1px solid #eee;">
                        <a href="{% url 'knowledgebase:request_detail' req.id %}" style="text-decoration: none; color: #007bff;">
                            {{ req.title|truncatewords:10 }}
                        </a>
                        <span class="badge" style="padding: 3px 8px; background-color: #007bff; color: white; border-radius: 3px; font-size: 12px; margin-left: 10px;">
                            {{ req.get_status_display }}
                        </span>
                        <small style="color: #6c757d; display: block;">{{ req.created_at|date:"d.m.Y H:i" }}</small>
                    </li>
                    {% endfor %}
                </ul>
                <a href="{% url 'knowledgebase:requests-page' %}" class="btn btn-primary" style="display: inline-block; padding: 8px 16px; background-color: #007bff; color: white; text-decoration: none; border-radius: 4px; margin-top: 10px;">
                    –í—Å–µ –∑–∞—è–≤–∫–∏
                </a>
            {% else %}
                <p>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞—è–≤–æ–∫</p>
            {% endif %}
        </div>

        <div class="card" style="background: white; padding: 20px; border-radius: 8px; border: 1px solid #ddd;">
            <h3>üìã –ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –º–Ω–µ –∑–∞—è–≤–∫–∏</h3>
            {% if my_assigned_requests %}
                <ul style="list-style: none; padding: 0;">
                    {% for req in my_assigned_requests %}
                    <li style="padding: 10px; border-bottom: 1px solid #eee;">
                        <a href="{% url 'knowledgebase:request_detail' req.id %}" style="text-decoration: none; color: #007bff;">
                            {{ req.title|truncatewords:10 }}
                        </a>
                        <small style="color: #6c757d; display: block;">{{ req.created_at|date:"d.m.Y H:i" }}</small>
                    </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>–ù–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –∑–∞—è–≤–æ–∫</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}







