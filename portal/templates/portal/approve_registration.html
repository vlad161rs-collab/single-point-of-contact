{% extends "knowledgebase/base.html" %}
{% load static %}

{% block title %}Одобрить регистрацию{% endblock %}

{% block content %}
<div class="container" style="max-width: 600px; margin: 40px auto; padding: 20px;">
    <h2>Одобрить запрос на регистрацию</h2>
    
    <div class="info-box" style="background-color: #e7f3ff; border: 1px solid #b8daff; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
        <h3>Информация о запросе</h3>
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; font-weight: bold;">Имя пользователя:</td>
                <td style="padding: 8px;">{{ reg_request.username }}</td>
            </tr>
            <tr>
                <td style="padding: 8px; font-weight: bold;">Email:</td>
                <td style="padding: 8px;">{{ reg_request.email }}</td>
            </tr>
            <tr>
                <td style="padding: 8px; font-weight: bold;">Имя:</td>
                <td style="padding: 8px;">{{ reg_request.first_name|default:"—" }}</td>
            </tr>
            <tr>
                <td style="padding: 8px; font-weight: bold;">Фамилия:</td>
                <td style="padding: 8px;">{{ reg_request.last_name|default:"—" }}</td>
            </tr>
            <tr>
                <td style="padding: 8px; font-weight: bold;">Роль:</td>
                <td style="padding: 8px;">{{ reg_request.get_requested_role_display }}</td>
            </tr>
            <tr>
                <td style="padding: 8px; font-weight: bold;">Отдел:</td>
                <td style="padding: 8px;">{{ reg_request.department.name|default:"—" }}</td>
            </tr>
            <tr>
                <td style="padding: 8px; font-weight: bold;">Должность:</td>
                <td style="padding: 8px;">{{ reg_request.position|default:"—" }}</td>
            </tr>
        </table>
    </div>

    <div class="warning-box" style="background-color: #fff3cd; border: 1px solid #ffc107; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
        <p style="margin: 0; color: #856404;">
            <strong>Внимание:</strong> После одобрения будет создан аккаунт пользователя, 
            и ему будет отправлен email с временным паролем. Пользователь должен будет 
            сменить пароль при первом входе.
        </p>
    </div>

    <form method="post">
        {% csrf_token %}
        <div class="form-group">
            <button type="submit" class="btn btn-success" style="padding: 12px 24px; background-color: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px;">
                Подтвердить одобрение
            </button>
            <a href="{% url 'portal:registration_requests' %}" class="btn btn-secondary" style="padding: 12px 24px; background-color: #6c757d; color: white; text-decoration: none; border-radius: 4px;">
                Отмена
            </a>
        </div>
    </form>
</div>
{% endblock %}







